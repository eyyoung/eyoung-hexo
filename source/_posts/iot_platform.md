---
title: 智能家居：平台的选择
---
在尝试了米家，Homekit，Home Assistant之后，对于智能要求成都较高的用户还是依然以Home Assistant作为接入的最终选择。无论是Homekit亦或是米家都存在或多或少的触发器问题，或者常见的厕所大号突然关灯问题。

## 控制协议

* Zigbee协议
	* Zigbee需要网关
	* Zigbee网关可以扩展Wifi容量，试想所有设备都接入路由器，即使是Wifi 6的路由器设备也很难一次性接入![容量](http://img30.360buyimg.com/sku/jfs/t1/88954/24/7405/302663/5dfb485aE51af9ff5/9b7ee299f20ab0e4.jpg)
	* Zigbee协议可以降低路由器负荷，网关将请求统一处理打包后发往路由器，对于路由器，访问设备便会变成仅是单一设备
	* Zigbee协议支持中继，借此扩大网络范围，即使是单一网关也可支持120平米户型
* Wifi协议
	* 基于Wifi协议的智能设备无需购买额外的网关
	* 虽然无需购买网关，但是从传统意义上家用路由器本质上就是一个网关，使用Wifi协议过多的设备必然导致路由器这个网关负荷较高
	* Wifi信号决定了稳定性
	* 由于是直接接入平台，对于家中广域网穿透控制家中局域网更加稳定 （在公司打开家里的热水器）
* BLE协议
	* BLE协议需要网关与平台通讯
	* BLE协议理论上与Zigbee是等价的，但是BLE的通信范围远小于Zigbee，原因是Zigbee的诞生本就是为了智能控制场景，BLE的诞生则参杂了更多业务场景

## Homekit

Homekit本质上是一个面向用户开箱即用的智能家居方案。苹果的设计都是围绕在易用性上，设备一旦接入平台后，便可以通过Siri，Home，快捷指令应用搭建一些简单的场景。

### 优势

* 易用，开箱即用
* 界面统一，友好
* 快捷指令可以实现多种逻辑，包括但不局限于
	* 如果
	* 重复
	* 等待
	* etc.
* 所有的设备基于网关通信，Zigbee协议又具备中继能力，即使是边缘区域的设备也可以通过中继信号快速抵达网关，并且由于整套系统部署在局域网，控制方案稳定，高效（关于中继能力的描述：http://docs.opencloud.aqara.com/guideline/product-discription/）
* 支持Siri
* 隐私性，安全性更强

### 劣势

* 搭建昂贵
* 稳定性高度依赖网关，网关一旦下线，整套系统便会瘫痪
* 外网访问缓慢
* 不支持光线传感器
* 自动化的触发灵活性不足

### Homekit中的家庭中枢

苹果对于用户数据的重视程度远高于Android群体，像是控制日志这种隐私数据，苹果认为不应当被上传到外部服务器。
于是Homekit对于外网的支持便是基于对控制中枢的依赖。
通过 打开家庭应用 -> 家庭设置 -> 中枢与桥接 可以查看到所有的家居中枢，如果你需要支持在公司控制家中的业务场景，你就需要在家中放置一个常驻在线家居中枢，可以是任何运行iOS/Mac/Homepod的设备，但他们必须保持通电。
家居中枢不仅是与外网通信的基础，也是自动化触发的基础，如果家中没有家居中枢也没有任何iOS设备，自动化将失效。
https://support.apple.com/zh-cn/HT207057

> 您需要家居中枢，才能在出门在外时控制您的 HomeKit 配件，向信任的人授予访问权限，以及让您的配件在您需要时自动完成所需的操作。

## 米家

米家作为小米平台的产物，无论是在交互亦或是配置上都更倾向于Android用户，如果家中有大量的苹果设备，在使用米家的过程中会存在或多或少体验不被重视的感觉。例如一些界面的适配，会明显的出现进度条不居中，或者是导航栏与其他页面割裂的情况

### 优势

* 支持设备多样
* 价格实惠
* 支持多重协议共存，无论是Zigbee，Wifi，BLE都有相关的设备进行支持
* 由于不局限于某种协议，所有的控制指令都会通过米家的服务中转到家中局域网指定设备，对外网控制的场景会更加契合，速度更快
* 自动化设置便捷

### 劣势

* 界面对于苹果用户存在一定割裂
* 局域网控制相对于Homekit不够稳定，由于Wifi信号的强度每个设备各不相同，在边缘区域的Wifi设备控制延迟必然会高于在中心区域的控制设备（这是Wifi协议的劣势，不是米家的）
* 由于自动化的出发也是基于米家服务，会导致自动化的触发延时依赖于服务器的通信延时
* 自动化的触发不够灵活导致的下述场景（Homekit同样存在）
> 不过，_智能硬件带来的那股新鲜劲没持续多久，很多人被智能硬件的傻给气哭了。手环测不准心率，电灯连不上Wi-Fi，撒泡尿的功夫洗手间的灯自动关了，你得边尿边晃动身体，告诉人体传感器你还在，别关灯。_

## Home Assistant

由于各场景下各户的智能家居都存在不同的配置场景，意味着智能家居对于动手能力的要求实际上不亚于一个硬装工程，就像水电的铺设一样，智能家居的场景其实也是一种水电工程，只不过智能家居的管道是各种无线通信协议。Homekit与米家在某种意义上采取了两种不同的路线，各有优劣。Home Assistant作为一个开元平台，有足够的社区活跃度将这两个平台进行桥接与打通。

### 优势

* 结合Homekit与米家各自的优势
* 高度自由的自动化方案

### 劣势

* 较高的上手难度


## 总结

从目前各平台的成熟度而言，单一的平台始终会受到设备成熟度，覆盖度等的限制，使用Home Assistant配合多平台做桥接对于动手能力强的家庭来说依然是一个较好的选择。